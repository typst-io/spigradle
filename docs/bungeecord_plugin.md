# Bungeecord Plugin

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

The [Bungeecord](https://www.spigotmc.org/wiki/about-bungeecord/) plugin allows you to:

- Generate 'bungee.yml' with less configuration.

- Shortcuts for dependency and repository.

## Table of contents

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

- [Requirements](#requirements)

- [Usage](#usage)

- [Description file generation](#description-file-generation)

- [Main class detection](#main-class-detection)

- [Configuration](#configuration)

- [Tasks](#tasks)

- [See also](#see-also)

## Requirements

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

The plugin requires Gradle 8.0+, the latest version is recommended.

To update your gradle wrapper:

```
gradlew wrapper --gradle-version 8.14.3 --distribution-type all
```

## Usage

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

[Full Example Here](https://github.com/spigradle/spigradle-sample/tree/master/bungeecord)

Groovy DSL

```groovy
plugins {
    id 'io.typst.spigradle.bungee' version '3.5.0'
}
```
Kotlin DSL

```kotlin
plugins {
    id("io.typst.spigradle.bungee") version "3.5.0"
}
```

<details>
<summary>Groovy Legacy</summary>

```groovy
buildscript {
    repositories {
        gradlePluginPortal()
    }
    dependencies {
        classpath 'io.typst:spigradle:3.5.0'
    }
}

apply plugin: 'io.typst.spigradle.bungee'
```

</details>

<details>
<summary>Kotlin Legacy</summary>

```groovy
buildscript {
    repositories {
        gradlePluginPortal()
    }
    dependencies {
        classpath("io.typst:spigradle:3.5.0")
    }
}

apply(plugin = "io.typst.spigradle.bungee")
```

</details>

## Description file generation

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

The `bungee.yml` file will be generated by task `generateBungeeDescription` based on the [configuration of `bungee`](#configuration), included into output jars automatically.

Basically the properties 'main', 'name' and 'version' defaults to [auto-detected main](#main-class-detection), [project.name](https://docs.gradle.org/current/javadoc/org/gradle/api/Project.html#getName--), [project.version](https://docs.gradle.org/current/javadoc/org/gradle/api/Project.html#getName--) respectively.  So if we create a simple plugin that just needs those properties, we don't need any configuration. Only pay attention to your unique implementation.

You can configure all properties of `plugin.yml` in [bungee {} block](#configuration).

## Main class detection

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

The plugin automatically detects your main plugin class using bytecode analysis (ASM). It scans compiled `.class` files to find classes that extend [Plugin](https://ci.md-5.net/job/BungeeCord/ws/api/target/apidocs/net/md_5/bungee/api/plugin/Plugin.html).

**How it works:**
- Scans compiled bytecode (not source code) for faster and more reliable detection
- Finds non-abstract, public classes extending `net.md_5.bungee.api.plugin.Plugin`
- Supports complex inheritance hierarchies
- Incremental: only scans changed files for faster builds
- Automatically sets the `main` property in `bungee.yml`

**Manual override:**
If you need to manually specify the main class:
```groovy
bungee {
    main.set("com.example.MyCustomMain")
}
```

For more details, see the [Main Class Detection](../README.md#main-class-detection) section.

## Configuration

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

### bungee - [BungeeExtension](https://docs.typst.io/spigradle/3.5.0/spigradle/io.typst.spigradle.bungee/-bungee-extension/index.html)

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

The description of your plugin for a 'bungee.yml'.

About the `bungee.yml`, See [Here](https://www.spigotmc.org/wiki/create-your-first-bungeecord-plugin-proxy-spigotmc/#making-it-load)

<details>
<summary>Groovy Example</summary>

```groovy
bungee {
    description 'A Bungeecord plugin.'
    author 'Me'
    depends 'foo', 'bar'
    softDepends 'soft'
}
```

</details>

<details>
<summary>Kotlin Example</summary>

```kotlin
bungee {
    description = "A Bungeecord plugin."
    author = "Me"
    depends = listOf("SomePlugin")
    softDepends = listOf("SomeSoftPlugin")
}
```

Without [type-safe accessors](https://docs.gradle.org/current/userguide/kotlin_dsl.html#sec:kotlin_using_standard_api):

```kotlin
configure<BungeeExtension> {
    description = "A Bungeecord plugin."
}
```

</details>

## Tasks

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

All tasks supports [UP-TO-DATE checks](https://docs.gradle.org/current/userguide/more_about_tasks.html#sec:up_to_date_checks).

<details>
<summary>Configuration Guide</summary>

Groovy:

```groovy
runBungee {
    jvmArgs('-Xmx8G')
}
```

Kotlin with type-safe accessors:

```kotlin
tasks {
    runBungee {
        jvmArgs("-Xmx8G")
    }
}
```

Kotlin without [type-safe accessors](https://docs.gradle.org/current/userguide/kotlin_dsl.html#sec:kotlin_using_standard_api):

```kotlin
tasks {
    named<JavaExec>("runBungee") {
        jvmArgs("-Xmx8G")
    }
}
```

Kotlin with property delegation

```kotlin
tasks {
    val runBungee by existing(JavaExec::class) {
        jvmArgs("-Xmx8G")
    }
    // Do something with 'runBungee'
}
```

</details>

### detectBungeeMain - [SubclassDetection](https://docs.typst.io/spigradle/3.5.0/spigradle/io.typst.spigradle/-subclass-detection/index.html)

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

Finds the main class extends [net.md_5.bungee.api.plugin.Plugin](https://ci.md-5.net/job/BungeeCord/ws/api/target/apidocs/net/md_5/bungee/api/plugin/Plugin.html).

### generateBungeeDescription - [YamlGenerate](https://docs.typst.io/spigradle/3.5.0/spigradle/io.typst.spigradle/-yaml-generate/index.html)

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

*Depends on: `detectBungeeMain`*

Generates the description file 'bungee.yml'.

## See also

[comment]: <> (!! Do not edit this file but 'docs/templates' or 'docs/root-templates', See [CONTRIBUTING.md] !!)

- [The Spigot plugin](spigot_plugin.md)
- [The Nukkit plugin](nukkit_plugin.md)
- [README.md](../README.md)
- [Gradle Kotlin DSL Primer](https://docs.gradle.org/current/userguide/kotlin_dsl.html)
